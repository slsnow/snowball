"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2609],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8179:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:4,title:"Minecraft Vagrant: Full Deployment"},i="Minecraft Vagrant: Full Deployement",l={unversionedId:"linux-acts/2deploy-mc/vm-vagrant/4vagrant-full",id:"linux-acts/2deploy-mc/vm-vagrant/4vagrant-full",title:"Minecraft Vagrant: Full Deployment",description:"The beautiful thing about vagrant, is we can configure it to run all of that setup for us, just by adding those commands to the bootstrap.sh. This is essentially bash scripting. We will now destroy the previous VM, and deploy the entire thing.",source:"@site/docs/linux-acts/2deploy-mc/vm-vagrant/4vagrant-full.md",sourceDirName:"linux-acts/2deploy-mc/vm-vagrant",slug:"/linux-acts/2deploy-mc/vm-vagrant/4vagrant-full",permalink:"/snowball/docs/linux-acts/2deploy-mc/vm-vagrant/4vagrant-full",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Minecraft Vagrant: Full Deployment"},sidebar:"tutorialSidebar",previous:{title:"Minecraft Vagrant: Basic Deployment",permalink:"/snowball/docs/linux-acts/2deploy-mc/vm-vagrant/3vagrant-basic"},next:{title:"Lab Guide",permalink:"/snowball/docs/category/lab-guide"}},p={},s=[{value:"Destroy the previous VM",id:"destroy-the-previous-vm",level:2},{value:"Update the bootstrap.sh file to run the full deployment",id:"update-the-bootstrapsh-file-to-run-the-full-deployment",level:2}],c={toc:s};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"minecraft-vagrant-full-deployement"},"Minecraft Vagrant: Full Deployement"),(0,a.kt)("p",null,"The beautiful thing about vagrant, is we can configure it to run all of that setup for us, just by adding those commands to the ",(0,a.kt)("inlineCode",{parentName:"p"},"bootstrap.sh"),". This is essentially bash scripting. We will now destroy the previous VM, and deploy the entire thing."),(0,a.kt)("h2",{id:"destroy-the-previous-vm"},"Destroy the previous VM"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Exit back to the host machine"),(0,a.kt)("li",{parentName:"ul"},"In the directory ",(0,a.kt)("inlineCode",{parentName:"li"},"~/vagrant-minecraft"),", run ",(0,a.kt)("inlineCode",{parentName:"li"},"vagrant destroy"),", and select ",(0,a.kt)("inlineCode",{parentName:"li"},"y")," to destroy the machine.")),(0,a.kt)("h2",{id:"update-the-bootstrapsh-file-to-run-the-full-deployment"},"Update the bootstrap.sh file to run the full deployment"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In the directory ",(0,a.kt)("inlineCode",{parentName:"li"},"~/vagrant-minecraft"),", run ",(0,a.kt)("inlineCode",{parentName:"li"},"vim bootstrap.sh"),", and update it with the following contents:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"groupadd game-admins\nuseradd -g game-admins minecraft-admin\nmkdir -p /opt/docker/appdata/minecraft\nchown minecraft-admin:game-admins /opt/docker/appdata/minecraft\nchmod 740 /opt/docker/appdata/minecraft\nzypper patch -y\nzypper install -y docker docker-bash-completion\nsystemctl enable --now docker\ndocker run -d --name minecraft -p 25565:25565 -e EULA=TRUE -e UID=1001 -e GID=1001 -v /opt/docker/appdata/minecraft:/data itzg/minecraft-server\nip a \n")),(0,a.kt)("p",null,"Then run ",(0,a.kt)("inlineCode",{parentName:"p"},"vagrant up"),", and watch the logs as it builds. After it finishes, SSH in and test if you'd like."))}u.isMDXComponent=!0}}]);