"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[256],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),m=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=m(a),u=r,f=p["".concat(s,".").concat(u)]||p[u]||c[u]||i;return a?n.createElement(f,o(o({ref:t},d),{},{components:a})):n.createElement(f,o({ref:t},d))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var m=2;m<i;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},3542:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>m});var n=a(7462),r=(a(7294),a(3905));const i={sidebar_position:1,title:"Minecraft Manual Build"},o="Minecraft: Manual Building a Minecraft Server",l={unversionedId:"linux-acts/mc-fun/mc-manual",id:"linux-acts/mc-fun/mc-manual",title:"Minecraft Manual Build",description:"Before starting this activity, take a snapshot of the VM.",source:"@site/docs/linux-acts/mc-fun/mc-manual.md",sourceDirName:"linux-acts/mc-fun",slug:"/linux-acts/mc-fun/mc-manual",permalink:"/snowball/docs/linux-acts/mc-fun/mc-manual",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Minecraft Manual Build"},sidebar:"tutorialSidebar",previous:{title:"Minecraft Fun",permalink:"/snowball/docs/category/minecraft-fun"},next:{title:"Common Commands",permalink:"/snowball/docs/linux-topics/common-commands"}},s={},m=[{value:"Activity Overview:",id:"activity-overview",level:2},{value:"Linux User Management",id:"linux-user-management",level:2},{value:"1. Create a group named <code>game-admins</code>.",id:"1-create-a-group-named-game-admins",level:3},{value:"2. Create a user named <code>minecraft-admin</code> that belongs to the group <code>game-admins</code>.",id:"2-create-a-user-named-minecraft-admin-that-belongs-to-the-group-game-admins",level:3},{value:"3. Create a password for <code>minecraft-admin</code>.",id:"3-create-a-password-for-minecraft-admin",level:3},{value:"Installing Java Packages",id:"installing-java-packages",level:2},{value:"1 - Use zypper to identify the latest Java openjdk Packages",id:"1---use-zypper-to-identify-the-latest-java-openjdk-packages",level:3},{value:"2 - Use zypper to install the latest Java openjdk Packages",id:"2---use-zypper-to-install-the-latest-java-openjdk-packages",level:3},{value:"Minecraft Directory and Permissions",id:"minecraft-directory-and-permissions",level:2},{value:"Download the Minecraft:JAVA Edition Server Files",id:"download-the-minecraftjava-edition-server-files",level:2},{value:"Launch Minecraft for the first Time",id:"launch-minecraft-for-the-first-time",level:2},{value:"Minecraft Systemd Configuration",id:"minecraft-systemd-configuration",level:2},{value:"Configuration File",id:"configuration-file",level:2},{value:"Daemon Reload",id:"daemon-reload",level:2},{value:"Start | Enable | Status",id:"start--enable--status",level:2},{value:"Logging",id:"logging",level:2}],d={toc:m};function c(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"minecraft-manual-building-a-minecraft-server"},"Minecraft: Manual Building a Minecraft Server"),(0,r.kt)("admonition",{title:"Warning",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Before starting this activity, take a snapshot of the VM.")),(0,r.kt)("h2",{id:"activity-overview"},"Activity Overview:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Goal: Build a local minecraft server from scratch. "),(0,r.kt)("li",{parentName:"ul"},"Activity Topics: ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Linux User Management"),(0,r.kt)("li",{parentName:"ul"},"Downloading a file"),(0,r.kt)("li",{parentName:"ul"},"File Editing"),(0,r.kt)("li",{parentName:"ul"},"Java - Running a jar file")))),(0,r.kt)("h2",{id:"linux-user-management"},"Linux User Management"),(0,r.kt)("p",null,"In a real life scenario, you might want to create some users to limit access. You may want to give access to a friend to be able to run certain game server related tasks on the system, but perhaps you don't want to give them full system access."),(0,r.kt)("h3",{id:"1-create-a-group-named-game-admins"},"1. Create a group named ",(0,r.kt)("inlineCode",{parentName:"h3"},"game-admins"),"."),(0,r.kt)("details",null,(0,r.kt)("summary",null," Expand for Help "),(0,r.kt)("p",null,"Run the following command to create a group named ",(0,r.kt)("inlineCode",{parentName:"p"},"game-admins")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# groupadd game-admins\n")),(0,r.kt)("p",null,"See ",(0,r.kt)("inlineCode",{parentName:"p"},"man groupadd")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"groupadd --help")," to view additional options.")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"2-create-a-user-named-minecraft-admin-that-belongs-to-the-group-game-admins"},"2. Create a user named ",(0,r.kt)("inlineCode",{parentName:"h3"},"minecraft-admin")," that belongs to the group ",(0,r.kt)("inlineCode",{parentName:"h3"},"game-admins"),"."),(0,r.kt)("details",null,(0,r.kt)("summary",null," Expand for Help "),(0,r.kt)("p",null,"Run the following command to create a user named ",(0,r.kt)("inlineCode",{parentName:"p"},"minecraft-admin"),", and simultaneously add it to the group named ",(0,r.kt)("inlineCode",{parentName:"p"},"game-admins"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# useradd -g game-admins minecraft-admin\n")),(0,r.kt)("p",null,"See ",(0,r.kt)("inlineCode",{parentName:"p"},"man useradd")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"useradd --help")," to view additional options.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"To verify that the user ",(0,r.kt)("inlineCode",{parentName:"p"},"minecraft-admin")," belongs to the group ",(0,r.kt)("inlineCode",{parentName:"p"},"game-admins"),", run:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},"# id minecraft-admin\n"))),(0,r.kt)("h3",{id:"3-create-a-password-for-minecraft-admin"},"3. Create a password for ",(0,r.kt)("inlineCode",{parentName:"h3"},"minecraft-admin"),"."),(0,r.kt)("details",{markdown:"1"},(0,r.kt)("summary",null,"Expand for Help"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# passwd minecraft-admin\n"))),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"installing-java-packages"},"Installing Java Packages"),(0,r.kt)("p",null,"This activity uses ",(0,r.kt)("strong",{parentName:"p"},"Minecraft Java Edition"),". To be able to run the Java based application, we will need to first install the required packages."),(0,r.kt)("p",null,"The Java Runtime Environment (JRE) is software that allows applications written in the Java programming language to run. For this activity, the popular open source implementation of Java, openJDK, will be used."),(0,r.kt)("p",null,"As of writing this guide, the latest version of minecraft is version 1.19.1."),(0,r.kt)("h3",{id:"1---use-zypper-to-identify-the-latest-java-openjdk-packages"},"1 - Use zypper to identify the latest Java openjdk Packages"),(0,r.kt)("details",{markdown:"1"},(0,r.kt)("summary",null,"Expand for Help"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# zypper se java-*-openjdk\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"As of this writing, the latest package version was the ",(0,r.kt)("inlineCode",{parentName:"p"},"java-17-openjdk")," package."))),(0,r.kt)("h3",{id:"2---use-zypper-to-install-the-latest-java-openjdk-packages"},"2 - Use zypper to install the latest Java openjdk Packages"),(0,r.kt)("p",null,"Install the ",(0,r.kt)("inlineCode",{parentName:"p"},"java-17-openjdk")," package, with its dependencies."),(0,r.kt)("details",{markdown:"1"},(0,r.kt)("summary",null,"Expand for Help"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# zypper in java-17-openjdk\n# java --version\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The zypper package manager, like other linux package managers, will automatically resolve package dependencies, based on the repositories that are enabled on the system. "),(0,r.kt)("p",{parentName:"admonition"},"To see more information about the package, you can run ",(0,r.kt)("inlineCode",{parentName:"p"},"zypper info <package>"),"."))),(0,r.kt)("h2",{id:"minecraft-directory-and-permissions"},"Minecraft Directory and Permissions"),(0,r.kt)("p",null,"We'd like to create a directory to house the minecraft server files. We also want to limit the access that processes and users have to the minecraft server files by configuring the ownership and permissions."),(0,r.kt)("p",null,"Tasks:\nA) Change and login as the ",(0,r.kt)("inlineCode",{parentName:"p"},"minecraft-admin")," user, and verify the password works.\nB) Create a directory for the server at the location ",(0,r.kt)("inlineCode",{parentName:"p"},"/opt/minecraft/")," using sudo.\nC) Assign ownership to ",(0,r.kt)("inlineCode",{parentName:"p"},"minecraft-admin:game-admins")," using sudo.\nD) Change the permissions on ",(0,r.kt)("inlineCode",{parentName:"p"},"/opt/minecraft")," to 740\nE) Change the home of the user ",(0,r.kt)("inlineCode",{parentName:"p"},"minecraft-admin")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"/opt/minecraft/"),".\nF) Verify another login, the current directory, and permissions."),(0,r.kt)("details",{markdown:"1"},(0,r.kt)("summary",null,"Expand for Help"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# su - minecraft-admin\n> su - minecraft-admin\n> exit\n\n> sudo mkdir /opt/minecraft/\n> sudo chown minecraft-admin:game-admins /opt/minecraft\n> sudo chmod 740 /opt/minecraft\n\n> exit\n# usermod -d /opt/minecraft/ minecraft-admin\n\n# su - minecraft-admin\n> ls -la /opt/minecraft/\n> pwd\n"))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"download-the-minecraftjava-edition-server-files"},"Download the Minecraft:JAVA Edition Server Files"),(0,r.kt)("p",null,"We need to put the actual server files on the server.\nThe latest Minecraft:Java Server files are found officially at this url:\n",(0,r.kt)("a",{parentName:"p",href:"https://www.minecraft.net/en-us/download/server"},"https://www.minecraft.net/en-us/download/server"),"\nYou can right click the hyperlink to get the link address."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"wget -O minecraft_server.1.19.1.jar https://piston-data.mojang.com/v1/objects/8399e1211e95faa421c1507b322dbeae86d604df/server.jar\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'echo "eula=true" > eula.txt\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"launch-minecraft-for-the-first-time"},"Launch Minecraft for the first Time"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"java -Xms1024M -Xmx6144M -jar minecraft_server.1.19.1.jar nogui\n")),(0,r.kt)("p",null,"Go to Client and test logging into the Server"),(0,r.kt)("h2",{id:"minecraft-systemd-configuration"},"Minecraft Systemd Configuration"),(0,r.kt)("p",null,"Create a systemd service file"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"vim /etc/systemd/system/minecraft.service"))),(0,r.kt)("p",null,"Contents"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[Unit]\nDescription=Minecraft Server\nAfter=network.target\n\n[Service]\nUser=minecraft-admin\nWorkingDirectory=/opt/minecraft\nEnvironmentFile=/etc/sysconfig/minecraft\nExecStart=/usr/bin/java $JAVA_OPTS\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n")),(0,r.kt)("h2",{id:"configuration-file"},"Configuration File"),(0,r.kt)("p",null,'Create configuration file "/etc/sysconfig/minecraft" to hold our java settings for launching the server'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'JAVA_OPTS="-Xms1024M -Xmx2048M -jar minecraft_server.1.19.1.jar nogui"\n')),(0,r.kt)("h2",{id:"daemon-reload"},"Daemon Reload"),(0,r.kt)("p",null,"After making changes to these settings, you have to run a daemon-reload"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"systemctl daemon-reload")),(0,r.kt)("h2",{id:"start--enable--status"},"Start | Enable | Status"),(0,r.kt)("p",null,'To start the server run "systemctl start minecraft.service"\nTo ensure it start on boot run "systemctl enable minecraft.service"\nTo check the status, "systemctl status minecraft.service"'),(0,r.kt)("p",null,"Need to make sure there is enough memory, can tweek the amount of memory/cpus as needed for stability, and can edit the min and max in the /etc/sysconfig/minecraft file. "),(0,r.kt)("h2",{id:"logging"},"Logging"),(0,r.kt)("p",null,'Systemd has it\'s own journal for logging purposes.\nTo access these logs run "journalctl". '),(0,r.kt)("p",null,'You can run "journalctl -f" to follow the logs live.\nYou can also run "journalctl -xeu minecraft.service"\nThis will take you to the bottom, and only show the minecraft.service entries. This is useful if the service fails to start, or has other errors.'))}c.isMDXComponent=!0}}]);